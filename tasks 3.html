<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Progress Tracker - Task Management Revolution</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 25%, #2d1b69 50%, #1a1a3e 75%, #0f0f23 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .gradient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .neon-glow {
            box-shadow: 
                0 0 20px rgba(120, 119, 198, 0.4),
                0 0 40px rgba(120, 119, 198, 0.2),
                0 0 60px rgba(120, 119, 198, 0.1);
        }

        .task-card {
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform-style: preserve-3d;
            position: relative;
            overflow: hidden;
        }

        .task-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.6s;
        }

        .task-card:hover::before {
            left: 100%;
        }

        .task-card:hover {
            transform: translateY(-5px) rotateX(5deg);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.4),
                0 0 20px rgba(120, 119, 198, 0.3);
        }

        .priority-indicator {
            width: 4px;
            height: 100%;
            position: absolute;
            left: 0;
            top: 0;
            border-radius: 0 2px 2px 0;
        }

        .priority-low { background: linear-gradient(180deg, #10b981, #34d399); }
        .priority-medium { background: linear-gradient(180deg, #f59e0b, #fbbf24); }
        .priority-high { background: linear-gradient(180deg, #ef4444, #f87171); }

        .btn-3d {
            position: relative;
            transform-style: preserve-3d;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            background: linear-gradient(145deg, rgba(120, 119, 198, 0.8), rgba(120, 119, 198, 0.6));
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            overflow: hidden;
        }

        .btn-3d::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), transparent);
            transition: opacity 0.3s;
            opacity: 0;
        }

        .btn-3d:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(120, 119, 198, 0.4);
        }

        .btn-3d:hover::before {
            opacity: 1;
        }

        .btn-3d:active {
            transform: translateY(0);
        }

        .floating-particles {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: rgba(120, 119, 198, 0.6);
            border-radius: 50%;
            animation: float 6s infinite linear;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-10px) rotate(360deg);
                opacity: 0;
            }
        }

        .task-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: white;
            padding: 12px 16px;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }

        .task-input:focus {
            outline: none;
            border-color: rgba(120, 119, 198, 0.5);
            box-shadow: 0 0 20px rgba(120, 119, 198, 0.2);
            background: rgba(255, 255, 255, 0.08);
        }

        .task-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .progress-ring {
            transition: stroke-dashoffset 0.5s ease-in-out;
        }

        .stats-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }

        .stats-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #10b981, #f59e0b, #ef4444);
        }

        .task-animation {
            animation: slideInUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .delete-btn {
            background: linear-gradient(145deg, #ef4444, #dc2626);
            transition: all 0.3s;
        }

        .delete-btn:hover {
            background: linear-gradient(145deg, #dc2626, #b91c1c);
            transform: scale(1.1);
        }

        .priority-selector {
            appearance: none;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: white;
            padding: 8px 12px;
            cursor: pointer;
        }

        .logo-text {
            font-family: 'Orbitron', monospace;
            font-weight: 900;
            background: linear-gradient(45deg, #7777c6, #ff77c6, #77dbff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(120, 119, 198, 0.5);
        }

        .section-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(120, 119, 198, 0.5), transparent);
            margin: 2rem 0;
        }

        .completion-celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            z-index: 1000;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: celebrationPop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes celebrationPop {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .task-card {
                margin-bottom: 1rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="gradient-bg"></div>
    <div class="floating-particles" id="particles"></div>

    <div class="container mx-auto px-4 py-8 relative z-10">
        <!-- Header Section -->
        <header class="text-center mb-12">
            <h1 class="logo-text text-6xl md:text-8xl mb-4">TASKFORGE</h1>
            <p class="text-xl text-gray-300 mb-8">Forging productivity in the digital realm</p>
            <div class="glass-effect rounded-2xl p-6 inline-block neon-glow">
                <div class="flex items-center justify-center space-x-4">
                    <div id="three-container" class="w-16 h-16"></div>
                    <div class="text-left">
                        <div class="text-2xl font-bold text-white" id="total-tasks">0</div>
                        <div class="text-sm text-gray-400">Total Tasks</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Task Input Section -->
        <section class="mb-12">
            <div class="glass-effect rounded-2xl p-8 max-w-4xl mx-auto">
                <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                    <i class="fas fa-plus-circle mr-3 text-blue-400"></i>
                    Create New Task
                </h2>
                <div class="grid md:grid-cols-3 gap-4 mb-6">
                    <input 
                        type="text" 
                        id="task-input" 
                        placeholder="Enter your task description..."
                        class="task-input md:col-span-2"
                    >
                    <select id="priority-select" class="priority-selector">
                        <option value="low">ðŸŸ¢ Low Priority</option>
                        <option value="medium">ðŸŸ¡ Medium Priority</option>
                        <option value="high">ðŸ”´ High Priority</option>
                    </select>
                </div>
                <button id="add-task-btn" class="btn-3d px-8 py-4 w-full md:w-auto">
                    <i class="fas fa-rocket mr-2"></i>
                    Launch Task
                </button>
            </div>
        </section>

        <!-- Statistics Section -->
        <section class="mb-12">
            <div class="stats-grid grid md:grid-cols-4 gap-6 max-w-6xl mx-auto">
                <div class="stats-card p-6 text-center">
                    <div class="text-3xl font-bold text-green-400 mb-2" id="completed-count">0</div>
                    <div class="text-gray-400">Completed</div>
                    <div class="mt-4">
                        <svg class="w-16 h-16 mx-auto">
                            <circle cx="32" cy="32" r="28" fill="none" stroke="rgba(16, 185, 129, 0.2)" stroke-width="4"/>
                            <circle cx="32" cy="32" r="28" fill="none" stroke="#10b981" stroke-width="4" 
                                    stroke-dasharray="175.929" stroke-dashoffset="175.929" 
                                    class="progress-ring" id="completed-ring" transform="rotate(-90 32 32)"/>
                        </svg>
                    </div>
                </div>
                <div class="stats-card p-6 text-center">
                    <div class="text-3xl font-bold text-red-400 mb-2" id="high-priority-count">0</div>
                    <div class="text-gray-400">High Priority</div>
                    <div class="mt-4">
                        <i class="fas fa-exclamation-triangle text-4xl text-red-400"></i>
                    </div>
                </div>
                <div class="stats-card p-6 text-center">
                    <div class="text-3xl font-bold text-yellow-400 mb-2" id="medium-priority-count">0</div>
                    <div class="text-gray-400">Medium Priority</div>
                    <div class="mt-4">
                        <i class="fas fa-clock text-4xl text-yellow-400"></i>
                    </div>
                </div>
                <div class="stats-card p-6 text-center">
                    <div class="text-3xl font-bold text-green-400 mb-2" id="low-priority-count">0</div>
                    <div class="text-gray-400">Low Priority</div>
                    <div class="mt-4">
                        <i class="fas fa-leaf text-4xl text-green-400"></i>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Tasks Section -->
        <section>
            <div class="max-w-6xl mx-auto">
                <h2 class="text-3xl font-bold text-white mb-8 text-center flex items-center justify-center">
                    <i class="fas fa-tasks mr-3 text-purple-400"></i>
                    Task Management Center
                </h2>
                
                <!-- Filter Buttons -->
                <div class="flex flex-wrap justify-center gap-4 mb-8">
                    <button class="filter-btn btn-3d px-6 py-3 active" data-filter="all">
                        <i class="fas fa-list mr-2"></i>All Tasks
                    </button>
                    <button class="filter-btn btn-3d px-6 py-3" data-filter="high">
                        <i class="fas fa-fire mr-2"></i>High Priority
                    </button>
                    <button class="filter-btn btn-3d px-6 py-3" data-filter="medium">
                        <i class="fas fa-clock mr-2"></i>Medium Priority
                    </button>
                    <button class="filter-btn btn-3d px-6 py-3" data-filter="low">
                        <i class="fas fa-leaf mr-2"></i>Low Priority
                    </button>
                    <button class="filter-btn btn-3d px-6 py-3" data-filter="completed">
                        <i class="fas fa-check-circle mr-2"></i>Completed
                    </button>
                </div>

                <!-- Tasks Container -->
                <div id="tasks-container" class="space-y-4">
                    <!-- Tasks will be dynamically inserted here -->
                </div>

                <!-- Empty State -->
                <div id="empty-state" class="text-center py-16 hidden">
                    <div class="glass-effect rounded-2xl p-12 max-w-md mx-auto">
                        <i class="fas fa-rocket text-6xl text-gray-500 mb-6"></i>
                        <h3 class="text-2xl font-bold text-white mb-4">Ready for Launch!</h3>
                        <p class="text-gray-400">No tasks yet. Create your first task above to start your productivity journey.</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        class TaskManager {
            constructor() {
                this.tasks = JSON.parse(localStorage.getItem('taskforge-tasks')) || [];
                this.currentFilter = 'all';
                this.taskIdCounter = this.tasks.length > 0 ? Math.max(...this.tasks.map(t => t.id)) + 1 : 1;
                this.scene = null;
                this.renderer = null;
                this.cube = null;
                
                this.init();
                this.setupEventListeners();
                this.render();
                this.updateStats();
                this.initThreeJS();
                this.createFloatingParticles();
            }

            init() {
                this.taskInput = document.getElementById('task-input');
                this.prioritySelect = document.getElementById('priority-select');
                this.addTaskBtn = document.getElementById('add-task-btn');
                this.tasksContainer = document.getElementById('tasks-container');
                this.emptyState = document.getElementById('empty-state');
            }

            setupEventListeners() {
                this.addTaskBtn.addEventListener('click', () => this.addTask());
                this.taskInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.addTask();
                });

                // Filter buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.currentFilter = e.target.dataset.filter;
                        this.render();
                    });
                });
            }

            addTask() {
                const taskText = this.taskInput.value.trim();
                if (!taskText) {
                    this.shakeInput();
                    return;
                }

                const task = {
                    id: this.taskIdCounter++,
                    text: taskText,
                    priority: this.prioritySelect.value,
                    completed: false,
                    createdAt: new Date().toISOString(),
                    completedAt: null
                };

                this.tasks.unshift(task);
                this.saveTasks();
                this.taskInput.value = '';
                this.render();
                this.updateStats();
                this.animateTaskAdd();
            }

            deleteTask(id) {
                this.tasks = this.tasks.filter(task => task.id !== id);
                this.saveTasks();
                this.render();
                this.updateStats();
            }

            toggleTask(id) {
                const task = this.tasks.find(t => t.id === id);
                if (task) {
                    task.completed = !task.completed;
                    task.completedAt = task.completed ? new Date().toISOString() : null;
                    this.saveTasks();
                    this.render();
                    this.updateStats();
                    
                    if (task.completed) {
                        this.showCompletionCelebration(task);
                    }
                }
            }

            showCompletionCelebration(task) {
                const celebration = document.createElement('div');
                celebration.className = 'completion-celebration';
                celebration.innerHTML = `
                    <i class="fas fa-trophy text-4xl text-yellow-400 mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">Task Completed! ðŸŽ‰</h3>
                    <p class="text-gray-300">"${task.text}"</p>
                    <button onclick="this.parentElement.remove()" class="btn-3d px-4 py-2 mt-4">
                        <i class="fas fa-check mr-2"></i>Awesome!
                    </button>
                `;
                document.body.appendChild(celebration);
                
                setTimeout(() => {
                    if (celebration.parentElement) {
                        celebration.remove();
                    }
                }, 3000);
            }

            getFilteredTasks() {
                switch (this.currentFilter) {
                    case 'high':
                        return this.tasks.filter(t => t.priority === 'high' && !t.completed);
                    case 'medium':
                        return this.tasks.filter(t => t.priority === 'medium' && !t.completed);
                    case 'low':
                        return this.tasks.filter(t => t.priority === 'low' && !t.completed);
                    case 'completed':
                        return this.tasks.filter(t => t.completed);
                    default:
                        return this.tasks;
                }
            }

            render() {
                const filteredTasks = this.getFilteredTasks();
                
                if (filteredTasks.length === 0) {
                    this.tasksContainer.innerHTML = '';
                    this.emptyState.classList.remove('hidden');
                    return;
                }

                this.emptyState.classList.add('hidden');
                
                this.tasksContainer.innerHTML = filteredTasks.map(task => `
                    <div class="task-card glass-effect rounded-2xl p-6 task-animation ${task.completed ? 'opacity-60' : ''}" 
                         data-priority="${task.priority}">
                        <div class="priority-indicator priority-${task.priority}"></div>
                        <div class="flex items-start justify-between">
                            <div class="flex items-start space-x-4 flex-1">
                                <button onclick="taskManager.toggleTask(${task.id})" 
                                        class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
                                            task.completed 
                                                ? 'bg-green-500 border-green-500 text-white' 
                                                : 'border-gray-400 hover:border-green-400'
                                        }">
                                    ${task.completed ? '<i class="fas fa-check text-xs"></i>' : ''}
                                </button>
                                <div class="flex-1">
                                    <div class="text-white font-medium mb-2 ${task.completed ? 'line-through' : ''}">
                                        ${task.text}
                                    </div>
                                    <div class="flex items-center space-x-4 text-sm text-gray-400">
                                        <span class="flex items-center">
                                            <i class="fas fa-flag mr-1"></i>
                                            ${task.priority.charAt(0).toUpperCase() + task.priority.slice(1)} Priority
                                        </span>
                                        <span class="flex items-center">
                                            <i class="fas fa-calendar mr-1"></i>
                                            ${new Date(task.createdAt).toLocaleDateString()}
                                        </span>
                                        ${task.completedAt ? `
                                            <span class="flex items-center text-green-400">
                                                <i class="fas fa-check-circle mr-1"></i>
                                                Completed ${new Date(task.completedAt).toLocaleDateString()}
                                            </span>
                                        ` : ''}
                                    </div>
                                </div>
                            </div>
                            <button onclick="taskManager.deleteTask(${task.id})" 
                                    class="delete-btn w-10 h-10 rounded-full flex items-center justify-center text-white ml-4">
                                <i class="fas fa-trash text-sm"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            updateStats() {
                const total = this.tasks.length;
                const completed = this.tasks.filter(t => t.completed).length;
                const high = this.tasks.filter(t => t.priority === 'high' && !t.completed).length;
                const medium = this.tasks.filter(t => t.priority === 'medium' && !t.completed).length;
                const low = this.tasks.filter(t => t.priority === 'low' && !t.completed).length;

                document.getElementById('total-tasks').textContent = total;
                document.getElementById('completed-count').textContent = completed;
                document.getElementById('high-priority-count').textContent = high;
                document.getElementById('medium-priority-count').textContent = medium;
                document.getElementById('low-priority-count').textContent = low;

                // Update progress ring
                const completionPercentage = total > 0 ? (completed / total) * 100 : 0;
                const circumference = 175.929;
                const offset = circumference - (completionPercentage / 100) * circumference;
                document.getElementById('completed-ring').style.strokeDashoffset = offset;
            }

            shakeInput() {
                this.taskInput.style.animation = 'none';
                this.taskInput.offsetHeight; // Trigger reflow
                this.taskInput.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => {
                    this.taskInput.style.animation = '';
                }, 500);
            }

            animateTaskAdd() {
                const newTaskCard = this.tasksContainer.firstElementChild;
                if (newTaskCard) {
                    newTaskCard.style.opacity = '0';
                    newTaskCard.style.transform = 'translateY(-20px)';
                    setTimeout(() => {
                        newTaskCard.style.transition = 'all 0.5s ease';
                        newTaskCard.style.opacity = '1';
                        newTaskCard.style.transform = 'translateY(0)';
                    }, 10);
                }
            }

            saveTasks() {
                localStorage.setItem('taskforge-tasks', JSON.stringify(this.tasks));
            }

            initThreeJS() {
                const container = document.getElementById('three-container');
                const width = container.offsetWidth;
                const height = container.offsetHeight;

                // Scene
                this.scene = new THREE.Scene();

                // Camera
                const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
                camera.position.z = 5;

                // Renderer
                this.renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
                this.renderer.setSize(width, height);
                this.renderer.setClearColor(0x000000, 0);
                container.appendChild(this.renderer.domElement);

                // Geometry and Material
                const geometry = new THREE.BoxGeometry(2, 2, 2);
                const material = new THREE.MeshBasicMaterial({
                    color: 0x7777c6,
                    wireframe: true,
                    transparent: true,
                    opacity: 0.8
                });

                this.cube = new THREE.Mesh(geometry, material);
                this.scene.add(this.cube);

                // Animation loop
                const animate = () => {
                    requestAnimationFrame(animate);
                    this.cube.rotation.x += 0.01;
                    this.cube.rotation.y += 0.01;
                    this.renderer.render(this.scene, camera);
                };
                animate();
            }

            createFloatingParticles() {
                const particlesContainer = document.getElementById('particles');
                
                setInterval(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                    particle.style.animationDelay = Math.random() * 2 + 's';
                    
                    particlesContainer.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 8000);
                }, 300);
            }
        }

        // Add shake animation to CSS
        const shakeStyle = document.createElement('style');
        shakeStyle.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(shakeStyle);

        // Initialize the task manager
        const taskManager = new TaskManager();

        // Add some interactive sound effects and additional features
        class SoundManager {
            constructor() {
                this.audioContext = null;
                this.initAudio();
            }

            initAudio() {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.log('Web Audio API not supported');
                }
            }

            playTone(frequency, duration, type = 'sine') {
                if (!this.audioContext) return;
                
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = type;
                
                gainNode.gain.setValueAtTime(0.1, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + duration);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + duration);
            }

            playSuccess() {
                this.playTone(523.25, 0.2);
                setTimeout(() => this.playTone(659.25, 0.2), 100);
                setTimeout(() => this.playTone(783.99, 0.3), 200);
            }

            playError() {
                this.playTone(200, 0.3);
            }

            playClick() {
                this.playTone(800, 0.1);
            }
        }

        // Advanced Task Analytics
        class TaskAnalytics {
            constructor(tasks) {
                this.tasks = tasks;
            }

            getCompletionRate() {
                if (this.tasks.length === 0) return 0;
                return (this.tasks.filter(t => t.completed).length / this.tasks.length) * 100;
            }

            getProductivityTrend() {
                const last7Days = [];
                const now = new Date();
                
                for (let i = 6; i >= 0; i--) {
                    const date = new Date(now);
                    date.setDate(date.getDate() - i);
                    const dateStr = date.toDateString();
                    
                    const completed = this.tasks.filter(t => 
                        t.completed && new Date(t.completedAt).toDateString() === dateStr
                    ).length;
                    
                    last7Days.push({
                        date: dateStr,
                        completed
                    });
                }
                
                return last7Days;
            }

            getPriorityDistribution() {
                const distribution = { high: 0, medium: 0, low: 0 };
                this.tasks.filter(t => !t.completed).forEach(task => {
                    distribution[task.priority]++;
                });
                return distribution;
            }

            getAverageCompletionTime() {
                const completedTasks = this.tasks.filter(t => t.completed && t.completedAt);
                if (completedTasks.length === 0) return 0;
                
                const totalTime = completedTasks.reduce((sum, task) => {
                    const created = new Date(task.createdAt);
                    const completed = new Date(task.completedAt);
                    return sum + (completed - created);
                }, 0);
                
                return totalTime / completedTasks.length / (1000 * 60 * 60 * 24); // Convert to days
            }
        }

        // Enhance the TaskManager with new features
        TaskManager.prototype.initAdvancedFeatures = function() {
            this.soundManager = new SoundManager();
            this.setupKeyboardShortcuts();
            this.setupBulkActions();
            this.setupTaskSearch();
            this.setupTaskExport();
            this.setupDarkModeToggle();
            this.setupAutoSave();
            this.initProgressVisualization();
        };

        TaskManager.prototype.setupKeyboardShortcuts = function() {
            document.addEventListener('keydown', (e) => {
                // Ctrl/Cmd + Enter to add task
                if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                    e.preventDefault();
                    this.addTask();
                }
                
                // Escape to clear input
                if (e.key === 'Escape') {
                    this.taskInput.value = '';
                    this.taskInput.blur();
                }
                
                // Ctrl/Cmd + A to select all tasks
                if ((e.ctrlKey || e.metaKey) && e.key === 'a' && e.target.tagName !== 'INPUT') {
                    e.preventDefault();
                    this.selectAllTasks();
                }
            });
        };

        TaskManager.prototype.setupBulkActions = function() {
            const bulkActionsHTML = `
                <div id="bulk-actions" class="glass-effect rounded-xl p-4 mb-6 hidden">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                        <span class="text-white">
                            <span id="selected-count">0</span> tasks selected
                        </span>
                        <div class="space-x-2">
                            <button id="bulk-complete" class="btn-3d px-4 py-2">
                                <i class="fas fa-check mr-2"></i>Complete All
                            </button>
                            <button id="bulk-delete" class="btn-3d px-4 py-2 delete-btn">
                                <i class="fas fa-trash mr-2"></i>Delete All
                            </button>
                            <button id="bulk-clear" class="btn-3d px-4 py-2">
                                <i class="fas fa-times mr-2"></i>Clear Selection
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            this.tasksContainer.insertAdjacentHTML('beforebegin', bulkActionsHTML);
            this.selectedTasks = new Set();
            
            // Event listeners for bulk actions
            document.getElementById('bulk-complete').addEventListener('click', () => this.bulkComplete());
            document.getElementById('bulk-delete').addEventListener('click', () => this.bulkDelete());
            document.getElementById('bulk-clear').addEventListener('click', () => this.clearSelection());
        };

        TaskManager.prototype.setupTaskSearch = function() {
            const searchHTML = `
                <div class="glass-effect rounded-xl p-4 mb-6">
                    <div class="relative">
                        <input type="text" id="task-search" placeholder="Search tasks..." 
                               class="task-input w-full pl-10">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                </div>
            `;
            
            document.querySelector('.filter-btn').parentElement.insertAdjacentHTML('afterend', searchHTML);
            
            const searchInput = document.getElementById('task-search');
            searchInput.addEventListener('input', (e) => {
                this.searchTerm = e.target.value.toLowerCase();
                this.render();
            });
        };

        TaskManager.prototype.setupTaskExport = function() {
            const exportHTML = `
                <div class="text-center mt-8">
                    <button id="export-tasks" class="btn-3d px-6 py-3">
                        <i class="fas fa-download mr-2"></i>Export Tasks
                    </button>
                </div>
            `;
            
            this.tasksContainer.insertAdjacentHTML('afterend', exportHTML);
            
            document.getElementById('export-tasks').addEventListener('click', () => this.exportTasks());
        };

        TaskManager.prototype.setupDarkModeToggle = function() {
            const toggleHTML = `
                <button id="theme-toggle" class="fixed top-4 right-4 z-50 btn-3d w-12 h-12 rounded-full">
                    <i class="fas fa-moon"></i>
                </button>
            `;
            
            document.body.insertAdjacentHTML('beforeend', toggleHTML);
            
            document.getElementById('theme-toggle').addEventListener('click', () => this.toggleTheme());
        };

        TaskManager.prototype.setupAutoSave = function() {
            // Auto-save every 30 seconds
            setInterval(() => {
                this.saveTasks();
                this.showAutoSaveIndicator();
            }, 30000);
        };

        TaskManager.prototype.initProgressVisualization = function() {
            const analytics = new TaskAnalytics(this.tasks);
            const trend = analytics.getProductivityTrend();
            
            // Create mini chart
            const chartHTML = `
                <div class="glass-effect rounded-xl p-4 mt-6">
                    <h3 class="text-white font-bold mb-4">7-Day Productivity Trend</h3>
                    <div class="flex items-end justify-between h-20 space-x-1">
                        ${trend.map((day, index) => `
                            <div class="flex-1 flex flex-col items-center">
                                <div class="bg-gradient-to-t from-blue-500 to-purple-500 rounded-t transition-all duration-500" 
                                     style="height: ${Math.max(day.completed * 10, 5)}px; width: 100%;"></div>
                                <span class="text-xs text-gray-400 mt-2">${['S','M','T','W','T','F','S'][new Date(day.date).getDay()]}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            document.querySelector('.stats-grid').insertAdjacentHTML('afterend', chartHTML);
        };

        // Add new methods to TaskManager
        TaskManager.prototype.selectAllTasks = function() {
            const visibleTasks = this.getFilteredTasks();
            visibleTasks.forEach(task => this.selectedTasks.add(task.id));
            this.updateBulkActions();
            this.render();
        };

        TaskManager.prototype.bulkComplete = function() {
            this.selectedTasks.forEach(id => {
                const task = this.tasks.find(t => t.id === id);
                if (task && !task.completed) {
                    task.completed = true;
                    task.completedAt = new Date().toISOString();
                }
            });
            this.clearSelection();
            this.saveTasks();
            this.render();
            this.updateStats();
            this.soundManager.playSuccess();
        };

        TaskManager.prototype.bulkDelete = function() {
            if (confirm(`Delete ${this.selectedTasks.size} selected tasks?`)) {
                this.tasks = this.tasks.filter(task => !this.selectedTasks.has(task.id));
                this.clearSelection();
                this.saveTasks();
                this.render();
                this.updateStats();
                this.soundManager.playClick();
            }
        };

        TaskManager.prototype.clearSelection = function() {
            this.selectedTasks.clear();
            this.updateBulkActions();
            this.render();
        };

        TaskManager.prototype.updateBulkActions = function() {
            const bulkActions = document.getElementById('bulk-actions');
            const selectedCount = document.getElementById('selected-count');
            
            if (this.selectedTasks.size > 0) {
                bulkActions.classList.remove('hidden');
                selectedCount.textContent = this.selectedTasks.size;
            } else {
                bulkActions.classList.add('hidden');
            }
        };

        TaskManager.prototype.exportTasks = function() {
            const dataStr = JSON.stringify(this.tasks, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `taskforge-export-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            URL.revokeObjectURL(url);
            this.soundManager.playClick();
        };

        TaskManager.prototype.toggleTheme = function() {
            document.body.classList.toggle('light-theme');
            const icon = document.querySelector('#theme-toggle i');
            icon.className = document.body.classList.contains('light-theme') ? 'fas fa-sun' : 'fas fa-moon';
        };

        TaskManager.prototype.showAutoSaveIndicator = function() {
            const indicator = document.createElement('div');
            indicator.className = 'fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg z-50';
            indicator.innerHTML = '<i class="fas fa-save mr-2"></i>Auto-saved';
            document.body.appendChild(indicator);
            
            setTimeout(() => indicator.remove(), 2000);
        };

        // Override the original render method to include search and selection
        const originalRender = TaskManager.prototype.render;
        TaskManager.prototype.render = function() {
            let filteredTasks = this.getFilteredTasks();
            
            // Apply search filter
            if (this.searchTerm) {
                filteredTasks = filteredTasks.filter(task => 
                    task.text.toLowerCase().includes(this.searchTerm)
                );
            }
            
            if (filteredTasks.length === 0) {
                this.tasksContainer.innerHTML = '';
                this.emptyState.classList.remove('hidden');
                return;
            }

            this.emptyState.classList.add('hidden');
            
            this.tasksContainer.innerHTML = filteredTasks.map(task => `
                <div class="task-card glass-effect rounded-2xl p-6 task-animation ${task.completed ? 'opacity-60' : ''} ${this.selectedTasks.has(task.id) ? 'ring-2 ring-blue-400' : ''}" 
                     data-priority="${task.priority}">
                    <div class="priority-indicator priority-${task.priority}"></div>
                    <div class="flex items-start justify-between">
                        <div class="flex items-start space-x-4 flex-1">
                            <input type="checkbox" 
                                   ${this.selectedTasks.has(task.id) ? 'checked' : ''}
                                   onchange="taskManager.toggleTaskSelection(${task.id})"
                                   class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500">
                            <button onclick="taskManager.toggleTask(${task.id})" 
                                    class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
                                        task.completed 
                                            ? 'bg-green-500 border-green-500 text-white' 
                                            : 'border-gray-400 hover:border-green-400'
                                    }">
                                ${task.completed ? '<i class="fas fa-check text-xs"></i>' : ''}
                            </button>
                            <div class="flex-1">
                                <div class="text-white font-medium mb-2 ${task.completed ? 'line-through' : ''}">
                                    ${task.text}
                                </div>
                                <div class="flex items-center space-x-4 text-sm text-gray-400">
                                    <span class="flex items-center">
                                        <i class="fas fa-flag mr-1"></i>
                                        ${task.priority.charAt(0).toUpperCase() + task.priority.slice(1)} Priority
                                    </span>
                                    <span class="flex items-center">
                                        <i class="fas fa-calendar mr-1"></i>
                                        ${new Date(task.createdAt).toLocaleDateString()}
                                    </span>
                                    ${task.completedAt ? `
                                        <span class="flex items-center text-green-400">
                                            <i class="fas fa-check-circle mr-1"></i>
                                            Completed ${new Date(task.completedAt).toLocaleDateString()}
                                        </span>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="taskManager.editTask(${task.id})" 
                                    class="btn-3d w-10 h-10 rounded-full flex items-center justify-center text-white">
                                <i class="fas fa-edit text-sm"></i>
                            </button>
                            <button onclick="taskManager.deleteTask(${task.id})" 
                                    class="delete-btn w-10 h-10 rounded-full flex items-center justify-center text-white">
                                <i class="fas fa-trash text-sm"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        };

        // Add new methods
        TaskManager.prototype.toggleTaskSelection = function(id) {
            if (this.selectedTasks.has(id)) {
                this.selectedTasks.delete(id);
            } else {
                this.selectedTasks.add(id);
            }
            this.updateBulkActions();
            this.render();
        };

        TaskManager.prototype.editTask = function(id) {
            const task = this.tasks.find(t => t.id === id);
            if (!task) return;
            
            const newText = prompt('Edit task:', task.text);
            if (newText && newText.trim() !== task.text) {
                task.text = newText.trim();
                this.saveTasks();
                this.render();
                this.soundManager.playClick();
            }
        };

        // Override the original addTask method to include sound
        const originalAddTask = TaskManager.prototype.addTask;
        TaskManager.prototype.addTask = function() {
            const taskText = this.taskInput.value.trim();
            if (!taskText) {
                this.shakeInput();
                this.soundManager.playError();
                return;
            }
            
            originalAddTask.call(this);
            this.soundManager.playSuccess();
        };

        // Override the original toggleTask method to include sound
        const originalToggleTask = TaskManager.prototype.toggleTask;
        TaskManager.prototype.toggleTask = function(id) {
            originalToggleTask.call(this, id);
            this.soundManager.playClick();
        };

        // Initialize advanced features
        setTimeout(() => {
            taskManager.initAdvancedFeatures();
        }, 100);

        // Add light theme styles
        const lightThemeStyle = document.createElement('style');
        lightThemeStyle.textContent = `
            .light-theme {
                background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 25%, #cbd5e1 50%, #e2e8f0 75%, #f8fafc 100%);
            }
            
            .light-theme .glass-effect {
                background: rgba(255, 255, 255, 0.8);
                border: 1px solid rgba(0, 0, 0, 0.1);
                color: #1f2937;
            }
            
            .light-theme .text-white {
                color: #1f2937 !important;
            }
            
            .light-theme .text-gray-400 {
                color: #6b7280 !important;
            }
            
            .light-theme .task-input {
                background: rgba(255, 255, 255, 0.9);
                color: #1f2937;
                border: 1px solid rgba(0, 0, 0, 0.1);
            }
            
            .light-theme .task-input::placeholder {
                color: #9ca3af;
            }
        `;
        document.head.appendChild(lightThemeStyle);

        // Add welcome message for first-time users
        if (taskManager.tasks.length === 0) {
            setTimeout(() => {
                const welcomeModal = document.createElement('div');
                welcomeModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                welcomeModal.innerHTML = `
                    <div class="glass-effect rounded-2xl p-8 max-w-md mx-4 text-center">
                        <i class="fas fa-rocket text-6xl text-blue-400 mb-6"></i>
                        <h2 class="text-2xl font-bold text-white mb-4">Welcome to TaskForge!</h2>
                        <p class="text-gray-300 mb-6">Your ultimate 3D task management experience. Create, organize, and complete tasks with style!</p>
                        <div class="space-y-2 text-sm text-gray-400 mb-6">
                            <p><kbd class="bg-gray-700 px-2 py-1 rounded">Ctrl+Enter</kbd> - Quick add task</p>
                            <p><kbd class="bg-gray-700 px-2 py-1 rounded">Escape</kbd> - Clear input</p>
                            <p><kbd class="bg-gray-700 px-2 py-1 rounded">Ctrl+A</kbd> - Select all tasks</p>
                        </div>
                        <button onclick="this.parentElement.parentElement.remove()" class="btn-3d px-6 py-3">
                            <i class="fas fa-play mr-2"></i>Let's Get Started!
                        </button>
                    </div>
                `;
                document.body.appendChild(welcomeModal);
            }, 1000);
        }
    </script>
</body>
</html>